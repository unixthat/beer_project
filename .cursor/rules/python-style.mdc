---
description:
globs:
alwaysApply: true
---
# Python Style Guide – BEER Project

This rule defines the mandatory coding style for **all** Python files in the repository.  It is automatically enforced by Flake8 in the pre-commit pipeline.

## 1 General
1. Maximum line length **120 chars** (`.flake8` already configured).
2. Use **Black** for formatting; run `black .` (Black's defaults + line-length 120).
3. Add **type hints** everywhere that is practical; run `mypy --strict` locally.
4. Do **not** chain multiple statements on one line (e.g. `a = 1; b = 2`).
5. Use two blank lines before top-level `class` / `def` declarations, one blank line between methods.
6. Prefer f-strings over `%` or `format()`.

## 2 Flake8 policy
The ignore list lives in `.flake8` and **must stay minimal**:
```
[flake8]
max-line-length = 120
extend-ignore = E203, W503, F401, F841, E402, W391
```
* `E203`, `W503` – Black compatibility.
* `F401`, `F841` – unused imports / vars allowed in `__init__.py` modules only.
* `E402` – late imports permitted in modules with optional heavyweight deps.
* `W391` – trailing newline at EOF is optional; fix if convenient.

Any new suppression **must** be justified with an inline comment explaining *why* it is necessary.

## 3 Imports
1. Standard library → third-party → local imports — separated by a blank line.
2. Avoid `import *`.  If unavoidable, restrict with `# noqa: F403` and explain.

## 4 Testing philosophy
1. **Never delete or skip tests** to make Flake8 or coverage pass.
2. Fix the underlying issue instead.

## 5 Commit checklist
Before pushing:
1. `black . && flake8 src tests`
2. `pytest -q`
3. `mypy --strict src`

Failure to meet the above will block the CI pipeline.
